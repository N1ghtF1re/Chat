<html>
<script src="data/User.js"></script>
<script src="data/Message.js"></script>
<body style="margin: 35px">
<form>
    <input id="messageField" type="text">
    <input onclick="checkAnswer();" value="send" type="button">
</form>

<div id="msg-box" style="width:500px; height: 400px; background: #eee; overflow:auto;"></div>

<script src="Client.js"></script>

<script>

    function checkAnswer() {
        var strMessage = msgField.value;
        try {
            if (strMessage && (strMessage[0] == "!")) {
              let words = strMessage.split(" ")
              if((currentUser == null) && (words.length = 2) && (words[0] == '!register')) {
                currentUser = new User(words[1], "AGENT")
                msg = new Message(currentUser, "", "reg")
                showMessage(new Message(new User("Server"), "Hello, " + currentUser.name))
                sendMsg(msg)
              } else if (currentUser != null) {
                if(words[0] == "!exit") {
                  msg = new Message(currentUser, "", "exit")
                  sendMsg(msg)
                } else if(words[0] == "!skip") {
                  msg = new Message(currentUser, "", "skip")
                  sendMsg(msg)
                }
              }
            } else if (currentUser != null) {

              msg = new Message(currentUser, strMessage)
              console.log(msg)
              sendMsg(msg)
              showMessage(msg)
            }

        } catch(err) {
          console.log(err)
        }
        msgField.value = "";

    }




</script>
</body>
</html>
